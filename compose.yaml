services:
  flask:
    build: flask-backend
    env_file:
      - flask-backend/.env
    command: gunicorn -w 4 -b 0.0.0.0:5000 application:create_app\(\) --access-logfile=-
    expose:
      - 5000
    restart: always
  nginx:
    build: nginx
    ports:
      - 5000:80
    depends_on:
      - flask
    restart: always
  react:
    build: react-frontend
    command: nginx -g 'daemon off;'
    ports:
      - 3000:80
    restart: always